/**
 ****************************************************************************************************
 * @file        bsp_oled.c
 * @author      
 * @version     
 * @date        2024-09-13
 * @brief       OLED¹¦ÄÜº¯Êý£¬Ê¹ÓÃIICÍ¨ÐÅ¡£
 ****************************************************************************************************
 * @attention
 *
 * ÊµÑéÆ½Ì¨:stm32f103vet6¿ª·¢°å 0.96´çOLEDÏÔÊ¾ÆÁ(SSD1306Ð¾Æ¬)
 *
 ****************************************************************************************************
 */

#include "bsp_oled.h"
#include "./I2C_Software/bsp_i2c.h"
#include "./OLED/bsp_oleddata.h"
#include "bsp_delay.h"
#include <math.h>

/** 
 *  ï¿½ï¿½ï¿½ê·½ï¿½ï¿½
  0ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Column(Y)(+)(0~127)
  |
  |
  |
  |
	|
	|Page(X)(+)(0~7)  
 */


/** 
 *  Height,Widthï¿½ï¿½ï¿½å£º
 *  Heightï¿½ï¿½Ã¿Ò»ï¿½ï¿½ï¿½ï¿½ï¿½Øµï¿½ï¿½ï¿½ï¿?1ï¿½ï¿½ï¿½ß¶È£ï¿½ï¿½ï¿½ï¿½È£ï¿½
 */

/**
  * OLEDÏÔ´æÊý×é
  * ËùÓÐµÄÏÔÊ¾º¯Êý£¬¶¼Ö»ÊÇ¶Ô´ËÏÔ´æÊý×é½øÐÐ¶ÁÐ´
  * Ëæºóµ÷ÓÃOLED_Updateº¯Êý»òOLED_UpdateAreaº¯Êý
  * ²Å»á½«ÏÔ´æÊý×éµÄÊý¾Ý·¢ËÍµ½OLEDÓ²¼þ£¬½øÐÐÏÔÊ¾
  */
uint8_t OLED_DisplayBuff[8][128];

void OLED_IIC_init(void)
{
	//ï¿½ï¿½Ê¼ï¿½ï¿½IIC SDAï¿½ï¿½SCLï¿½ï¿½ï¿½GPIO
	I2C_Init();
	delay_ms(100);
	/*Ð´ï¿½ï¿½Ò»Ïµï¿½Ðµï¿½ï¿½ï¿½ï¿½î£¬ï¿½ï¿½OLEDï¿½ï¿½ï¿½Ð³ï¿½Ê¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½*/
	SendCommand(0xAE);	//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¾ï¿½ï¿½ï¿½ï¿½/ï¿½Ø±Õ£ï¿½0xAEï¿½Ø±Õ£ï¿½0xAFï¿½ï¿½ï¿½ï¿½
	
	SendCommand(0xD5);	//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¾Ê±ï¿½Ó·ï¿½Æµï¿½ï¿½/ï¿½ï¿½ï¿½ï¿½Æµï¿½ï¿½
	SendCommand(0x80);	//0x00~0xFF
	
	SendCommand(0xA8);	//ï¿½ï¿½ï¿½Ã¶ï¿½Â·ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
	SendCommand(0x3F);	//0x0E~0x3F
	
	SendCommand(0xD3);	//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¾Æ«ï¿½ï¿½
	SendCommand(0x00);	//0x00~0x7F
	
	SendCommand(0x40);	//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¾ï¿½ï¿½Ê¼ï¿½Ð£ï¿½0x40~0x7F
	
	SendCommand(0xA1);	//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ò·ï¿½ï¿½ï¿½0xA1ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½0xA0ï¿½ï¿½ï¿½Ò·ï¿½ï¿½ï¿½
	
	SendCommand(0xC8);	//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â·ï¿½ï¿½ï¿½0xC8ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½0xC0ï¿½ï¿½ï¿½Â·ï¿½ï¿½ï¿½

	SendCommand(0xDA);	//ï¿½ï¿½ï¿½ï¿½COMï¿½ï¿½ï¿½ï¿½Ó²ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
	SendCommand(0x12);
	
	SendCommand(0x81);	//ï¿½ï¿½ï¿½Ã¶Ô±È¶ï¿½
	SendCommand(0xCF);	//0x00~0xFF

	SendCommand(0xD9);	//ï¿½ï¿½ï¿½ï¿½Ô¤ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿?
	SendCommand(0xF1);

	SendCommand(0xDB);	//ï¿½ï¿½ï¿½ï¿½VCOMHÈ¡ï¿½ï¿½Ñ¡ï¿½ñ¼¶±ï¿½
	SendCommand(0x30);

	SendCommand(0xA4);	//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¾ï¿½ï¿½/ï¿½Ø±ï¿½

	SendCommand(0xA6);	//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½/ï¿½ï¿½É«ï¿½ï¿½Ê¾ï¿½ï¿½0xA6ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½0xA7ï¿½ï¿½É«

	SendCommand(0x8D);	//ï¿½ï¿½ï¿½Ã³ï¿½ï¿½ï¿½
	SendCommand(0x14);

	SendCommand(0xAF);	//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¾
	
	OLED_Clear();       //ï¿½ï¿½ï¿½Ô´ï¿½ï¿½ï¿½ï¿½ï¿½È«ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
	OLED_Updata();      //ï¿½ï¿½ï¿½ï¿½GDDRAM
}

/**
 *  @brief   ï¿½ï¿½ssd1306ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Åºï¿½ 
 *  @param   Cmd ssd1306ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö½Ú£ï¿½ï¿½ï¿½Ñ¡0x00~0xFF
 *  @retval  ï¿½ï¿½
 */
void SendCommand(uint8_t Cmd)
{
	I2C_Start();
	I2C_WriteByte(OLED_Addr);
	I2C_WaitAck();
	I2C_WriteByte(CmdControlByte);//ï¿½ï¿½ï¿½Ã·ï¿½ï¿½ï¿½ï¿½ï¿½Ä£Ê½ï¿½ï¿½Co=0ï¿½ï¿½,Control byteï¿½É¿ï¿½ï¿½ï¿½ï¿½ï¿½Ò»ï¿½ï¿½ï¿½ï¿½ï¿½Íµï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ý»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
	I2C_WaitAck();
	I2C_WriteByte(Cmd);
	I2C_WaitAck();
	I2C_Stop();
}


/**
 *  @brief   ï¿½ï¿½ssd1306ï¿½ï¿½ï¿½ï¿½Ò»ï¿½ï¿½ï¿½Ö½ï¿½ 
 *  @param   DataBuff Òªï¿½ï¿½ï¿½Íµï¿½ï¿½ï¿½ï¿½Ý£ï¿½ï¿½Ö½Ú£ï¿½
 *           num ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
 *  @retval  ï¿½ï¿½
 */
void OLED_SendByte(uint8_t DataBuff)
{
	I2C_Start();
	I2C_WriteByte(OLED_Addr);
	I2C_WaitAck();
	I2C_WriteByte(DataControlByte);//ï¿½ï¿½ï¿½Ã·ï¿½ï¿½ï¿½ï¿½ï¿½Ä£Ê½ï¿½ï¿½Co=0ï¿½ï¿½,Control byteï¿½É¿ï¿½ï¿½ï¿½ï¿½ï¿½Ò»ï¿½ï¿½ï¿½ï¿½ï¿½Íµï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ý»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
	I2C_WaitAck();
	I2C_WriteByte(DataBuff);
	I2C_WaitAck();
	I2C_Stop();
}

/**
 *  @brief   ï¿½ï¿½ssd1306ï¿½ï¿½ï¿½Í¶ï¿½ï¿½ï¿½Ö½ï¿? 
 *  @param   DataBuff Òªï¿½ï¿½ï¿½Íµï¿½ï¿½ï¿½ï¿½Ý£ï¿½ï¿½Ö½Ú£ï¿½
 *           num ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
 *  @retval  ï¿½ï¿½
 */
void SendBytes(uint8_t* DataBuff,uint16_t num)
{
	uint16_t i;
	I2C_Start();
	I2C_WriteByte(OLED_Addr);
	I2C_WaitAck();
	I2C_WriteByte(DataControlByte);//ï¿½ï¿½ï¿½Ã·ï¿½ï¿½ï¿½ï¿½ï¿½Ä£Ê½ï¿½ï¿½Co=0ï¿½ï¿½,Control byteï¿½É¿ï¿½ï¿½ï¿½ï¿½ï¿½Ò»ï¿½ï¿½ï¿½ï¿½ï¿½Íµï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ý»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
	I2C_WaitAck();
	for(i=0;i<num;i++)
	{
		I2C_WriteByte(*(DataBuff+i));
		I2C_WaitAck();
	}
	I2C_Stop();
}

/**
 *  @brief   ï¿½ï¿½ï¿½ï¿½Ð´ï¿½ï¿½ï¿½ï¿½ï¿½Ýµï¿½ï¿½ï¿½Ê¼ï¿½ï¿½ï¿½ï¿½
 *  @param   Page Ò³ï¿½ï¿½Ö·ï¿½ï¿½ï¿½ï¿½Î§ï¿½ï¿½0~7
 *           Column ï¿½Ðµï¿½Ö·ï¿½ï¿½ï¿½ï¿½Î§ï¿½ï¿½0~127
 *  @retval  ï¿½ï¿½
 */
void SetCoordinate(uint8_t Page,uint8_t Column)
{
	SendCommand(0xB0|Page);//ï¿½ï¿½ï¿½ï¿½Ò³ï¿½ï¿½Ö·
	SendCommand(0x10|((Column&0xF0)>>4));//ï¿½ï¿½ï¿½ï¿½ï¿½Ðµï¿½Ö·ï¿½ï¿½ï¿½ï¿½Î»
	SendCommand(0x00|(Column&0x0F));//ï¿½ï¿½ï¿½ï¿½ï¿½Ðµï¿½Ö·ï¿½ï¿½ï¿½ï¿½Î»
}

/**
 *  @brief   ï¿½ï¿½ï¿½Ô´ï¿½ï¿½ï¿½ï¿½ï¿½È«ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
 *  @param   ï¿½ï¿½
 *  @retval  ï¿½ï¿½
 */
void OLED_Clear(void)
{
	uint8_t i=0;
	uint8_t j=0;
	for(i=0;i<8;i++)
	{
		for(j=0;j<128;j++)
		{
			OLED_DisplayBuff[i][j]=0;
		}
	}
}

/**
 *  @brief   ï¿½ï¿½ï¿½Ô´ï¿½ï¿½ï¿½ï¿½é²¿ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
 *  @param   X ï¿½Ô´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¼ï¿½Ð£ï¿½ï¿½ï¿½Î§0~65535
 *           Height Òªï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ß¶È£ï¿½Ã¿ï¿½ï¿½ï¿½ï¿½ï¿½Øµï¿½ï¿½Ê¾Ò»ï¿½ï¿½ï¿½ß¶È£ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿?
 *           Y ï¿½Ô´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¼ï¿½Ð£ï¿½ï¿½ï¿½Î§0~65535
 *           Width Òªï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
 *  @retval  ï¿½ï¿½
 */
void OLED_ClearPart(uint16_t X,uint16_t Y,uint16_t Height,uint16_t Width)
{
	uint8_t i=0;
	uint8_t j=0;
	for(i=X;i<X+Height;i++)//+1ï¿½ï¿½Îªï¿½Ë¶ï¿½X+HeightÎ»ï¿½ï¿½ï¿½Ð²ï¿½ï¿½ï¿½
	{
		for(j=Y;j<Y+Width;j++)
		{
			if(i<64&&j<128)
			{
				OLED_DisplayBuff[i/8][j] &= !(1<<(i%8));//Ö»ï¿½ï¿½ï¿½Î»ï¿½ï¿½ï¿½Ô³ï¿½ï¿½ï¿½ï¿½ï¿½Ä²ï¿½ï¿½ï¿½
			}
		}
	}
}

/**
 *  @brief   ï¿½ï¿½ï¿½Ô´ï¿½ï¿½ï¿½ï¿½ï¿½È«ï¿½ï¿½È¡ï¿½ï¿½
 *  @param   ï¿½ï¿½
 *  @retval  ï¿½ï¿½
 */
void OLED_Invert(void)
{
	uint8_t i=0;
	uint8_t j=0;
	for(i=0;i<8;i++)
	{
		for(j=0;j<128;j++)
		{
			OLED_DisplayBuff[i][j] ^=0xFF;
		}
	}
}

/**
 *  @brief   ï¿½ï¿½ï¿½Ô´ï¿½ï¿½ï¿½ï¿½é²¿ï¿½ï¿½È¡ï¿½ï¿½
 *  @param   X ï¿½Ô´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¼ï¿½Ð£ï¿½ï¿½ï¿½Î§0~65535
 *           Height Òªï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ß¶ï¿½
 *           Y ï¿½Ô´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¼ï¿½Ð£ï¿½ï¿½ï¿½Î§0~65535
 *           Width Òªï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
 *  @retval  ï¿½ï¿½
 */
void OLED_InvertPart(uint16_t X,uint16_t Y,uint16_t Height,uint16_t Width)
{
	uint8_t i=0;
	uint8_t j=0;
	for(i=X;i<X+Height;i++)
	{
		for(j=Y;j<Y+Width;j++)
		{
			if(i<64&&j<128)
			{
				OLED_DisplayBuff[i/8][j] ^= (0x01<<(i%8));//Ö»È¡ï¿½ï¿½Î»ï¿½ï¿½ï¿½Ô´ï¿½ï¿½ï¿½ï¿½ï¿½Ä²ï¿½ï¿½ï¿?
			}
		}
	}
}

/**
 *  @brief   ï¿½ï¿½ï¿½Ô´ï¿½ï¿½ï¿½ï¿½ï¿½È«ï¿½ï¿½ï¿½ï¿½ï¿½Âµï¿½ssd1306ï¿½ï¿½GDDRAM
 *  @param   ï¿½ï¿½
 *  @retval  ï¿½ï¿½
 */
void OLED_Updata(void)
{
	uint8_t i=0;
	for(i=0;i<8;i++)
	{
		SetCoordinate(i,0);
		SendBytes(OLED_DisplayBuff[i],128);
	}
}


/**
 *  @brief   ï¿½ï¿½ï¿½Ô´ï¿½ï¿½ï¿½ï¿½é²¿ï¿½Ö¸ï¿½ï¿½Âµï¿½ssd1306ï¿½ï¿½GDDRAM
 *  @param   X ï¿½Ô´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¼ï¿½Ð£ï¿½ï¿½ï¿½Î§0~65535
 *           Height Òªï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ß¶ï¿½,ï¿½ï¿½Î§0~65535
 *           Y ï¿½Ô´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¼ï¿½Ð£ï¿½ï¿½ï¿½Î§0~65535
 *           Width Òªï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½,ï¿½ï¿½Î§0~65535
 *  @retval  ï¿½ï¿½
 */
void OLED_UpdataPart(int16_t X,int16_t Y,int16_t Height,int16_t Width)
{
	int16_t i=0;
	int16_t j=0;
	int16_t Page0=X/8;
	int16_t Page1=(X+Height-1)/8;
	if(X<0)
	{
		Page0=Page0-1;
		Page1=Page1-1;
	}
	for(i=Page0;i<Page1+1;i++)
	{
			if(i>=0&&i<8&&j>=0&&j<128)
			{
				SetCoordinate(i,Y);
				SendBytes(&OLED_DisplayBuff[i][Y],Width);
			}
	}
}


/**
  *  @brief   ï¿½ï¿½Ê¾Í¼ï¿½ï¿½
  *  @note    ï¿½ï¿½ï¿½ï¿½Òªï¿½ï¿½ï¿½Ã¸ï¿½ï¿½Âºï¿½ï¿½ï¿½
  *  @note    ï¿½ï¿½ï¿½ï¿½ï¿½ssd1306ï¿½ï¿½ï¿½Ü¶ï¿½ï¿½ï¿½Ö»ï¿½ï¿½ï¿½ï¿½Ò³Ð´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½â£ºÍ?ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ô´ï¿½ï¿½ï¿½ï¿½é£¬ï¿½ï¿½ï¿½ï¿½ï¿½Ë¶ï¿½È¡ssd1306ï¿½ï¿½
  *           ï¿½ï¿½ï¿½Å¼ï¿½ï¿½ï¿½ï¿½ï¿½Ê¼Ò³Æ«ï¿½Æ£ï¿½Í¨ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ö»ï¿½Þ¸Ä±ï¿½Ò³ï¿½ï¿½Ê¼ï¿½ï¿½Ö·ï¿½ï¿½ï¿½Î»ï¿½ï¿½8Î»Ê£ï¿½ï¿½ï¿½ï¿½ï¿½Ý·ï¿½ï¿½ï¿½ï¿½ï¿½Ò»Ò³ï¿½ï¿½
  *           ï¿½Ô´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  *  @param   X ï¿½Ô´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¼ï¿½Ð£ï¿½ï¿½ï¿½Î§0~65535
  *           Height Òªï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ß¶ï¿½,ï¿½ï¿½Î§0~65535
  *           Y ï¿½Ô´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¼ï¿½Ð£ï¿½ï¿½ï¿½Î§0~65535
  *           Width Òªï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½,ï¿½ï¿½Î§0~65535
  *  @retval  ï¿½ï¿½
  */
void OLED_DisplayImage(uint16_t X,uint16_t Y,uint16_t Height,uint16_t Width,const uint8_t* ImageBuff)
{
	uint16_t i,j;
	uint16_t Page0;
	OLED_ClearPart(X,Y,Height,Width);
	Page0=X/8;

	for(i=0;i<(Height-1)/8+1;i++)//ï¿½ï¿½ï¿½ï²»Ó¦ï¿½ï¿½ï¿½Ç½ï¿½ï¿½ï¿½Ò³ï¿½ï¿½ï¿½ï¿½Ê¼Ò³ï¿½ï¿½ï¿½ï¿½Îªforï¿½Ú²ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ò³
	{
		for(j=0;j<Width;j++)
		{
			if((Y+j)>=0&&(Y+j)<128)//Ö»ï¿½ï¿½Ê¾ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
			{
				if(Page0+i >= 0 && Page0+i < 8)//Ö»ï¿½ï¿½Ê¾Ò³ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
					OLED_DisplayBuff[Page0+i][Y+j] |= ImageBuff[i*Width+j]<<(X%8);//ï¿½ï¿½ï¿½ï´¦ï¿½ï¿½ï¿½ï¿½ssd1306Ö»ï¿½ï¿½ï¿½ï¿½Ò³Ð´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½â£?ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ëµï¿½ï¿½
				if(Page0+i+1 >= 0 && Page0+i+1 < 8)//Ö»ï¿½ï¿½Ê¾Ò³ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
					OLED_DisplayBuff[Page0+i+1][Y+j] |= ImageBuff[i*Width+j]>>(8-X%8);
			}
		}
	}
}


/**
  *  @brief   ï¿½ï¿½Ê¾Ò»ï¿½ï¿½ï¿½Ö·ï¿½
  *  @param   X ï¿½Ô´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¼ï¿½Ð£ï¿½ï¿½ï¿½Î§0~65535
  *           Y ï¿½Ô´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¼ï¿½Ð£ï¿½ï¿½ï¿½Î§0~65535
  *  @param   FontSize ï¿½ï¿½ï¿½ï¿½ï¿½Ð¡ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î?ï¿½ï¿½ï¿½ï¿½ï¿½Ö?
  *    @arg   H16W8ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿?16ï¿½ï¿½7ï¿½ï¿½ï¿½ï¿½ï¿½Ø£ï¿½
  *           H8W6 ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿?8ï¿½ï¿½6ï¿½ï¿½ï¿½ï¿½ï¿½Ø£ï¿½
  *  @retval  ï¿½ï¿½
  */
void OLED_DisplayChar(uint16_t X,uint16_t Y,char Char,uint8_t FontSize)
{
	
	if(FontSize==H16W8)
	{
		OLED_DisplayImage(X,Y,16,8,OLED_F8x16[Char-' ']);
		OLED_UpdataPart(X,Y,16,8);
	}
	if(FontSize==H8W6)
	{
		OLED_DisplayImage(X,Y,8,6,OLED_F6x8[Char-' ']);
		OLED_UpdataPart(X,Y,8,6);
	}
}

/**
  *  @brief   ï¿½ï¿½Ê¾ï¿½Ö·ï¿½ï¿½ï¿½
  *  @param   X ï¿½Ô´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¼ï¿½Ð£ï¿½ï¿½ï¿½Î§0~65535
  *           Y ï¿½Ô´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¼ï¿½Ð£ï¿½ï¿½ï¿½Î§0~65535
  *  @param   FontSize ï¿½ï¿½ï¿½ï¿½ï¿½Ð¡ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î?ï¿½ï¿½ï¿½ï¿½ï¿½Ö?
  *    @arg   H16W8ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿?16ï¿½ï¿½7ï¿½ï¿½ï¿½ï¿½ï¿½Ø£ï¿½
  *           H8W6 ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿?8ï¿½ï¿½6ï¿½ï¿½ï¿½ï¿½ï¿½Ø£ï¿½
  *  @retval  ï¿½ï¿½
  */
void OLED_DisplayCharString(uint16_t X,uint16_t Y,char* String,uint8_t FontSize)
{
	uint8_t i;
	//ï¿½ï¿½Îªï¿½ï¿½ï¿½ï´«ï¿½ï¿½ï¿½ï¿½ï¿½Ö·ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ô²ï¿½ï¿½ï¿½Öªï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð¡ï¿½ï¿½Ö±ï¿½ï¿½ï¿½Ð¶ï¿½\nï¿½ï¿½ï¿½ï¿½
	for(i=0;String[i]!='\0';i++)//ï¿½ï¿½ï¿½ï¿½Ó¦ï¿½ï¿½Ñ§Ï°Ò»ï¿½Â£ï¿½Ö¸ï¿½ë´«ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ò»ï¿½ï¿½ï¿½ï¿½Òªï¿½ï¿½ï¿½ï¿½ï¿½Ã£ï¿½Ò²ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
	{
		OLED_DisplayChar(X,Y+8*i,String[i],FontSize);
	}
	if(FontSize==H16W8)
	{
		//ï¿½ï¿½Îªï¿½ï¿½ï¿½ï´«ï¿½ï¿½ï¿½ï¿½ï¿½Ö·ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ô²ï¿½ï¿½ï¿½Öªï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð¡ï¿½ï¿½Ö±ï¿½ï¿½ï¿½Ð¶ï¿½\nï¿½ï¿½ï¿½ï¿½
		for(i=0;String[i]!='\0';i++)//ï¿½ï¿½ï¿½ï¿½Ó¦ï¿½ï¿½Ñ§Ï°Ò»ï¿½Â£ï¿½Ö¸ï¿½ë´«ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ò»ï¿½ï¿½ï¿½ï¿½Òªï¿½ï¿½ï¿½ï¿½ï¿½Ã£ï¿½Ò²ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
		{
			OLED_DisplayChar(X,Y+8*i,String[i],FontSize);
		}
	}
	if(FontSize==H8W6)
	{
		//ï¿½ï¿½Îªï¿½ï¿½ï¿½ï´«ï¿½ï¿½ï¿½ï¿½ï¿½Ö·ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ô²ï¿½ï¿½ï¿½Öªï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ð¡ï¿½ï¿½Ö±ï¿½ï¿½ï¿½Ð¶ï¿½\nï¿½ï¿½ï¿½ï¿½
		for(i=0;String[i]!='\0';i++)//ï¿½ï¿½ï¿½ï¿½Ó¦ï¿½ï¿½Ñ§Ï°Ò»ï¿½Â£ï¿½Ö¸ï¿½ë´«ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ò»ï¿½ï¿½ï¿½ï¿½Òªï¿½ï¿½ï¿½ï¿½ï¿½Ã£ï¿½Ò²ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
		{
			OLED_DisplayChar(X,Y+6*i,String[i],FontSize);
		}
	}
}

/**
  *  @brief   ï¿½Î·ï¿½ï¿½ï¿½ï¿½ï¿½
  *  @note    Ö»ï¿½Ü¼ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î·ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ó²»³ï¿½ï¿½ï¿½ï¿½ï¿?-2147483648 ï¿½ï¿½ 2147483647ï¿½ï¿½
  *  @param   num ï¿½Î·ï¿½ï¿½×£ï¿½ï¿½ï¿½Î§ï¿½ï¿½-2147483648 ï¿½ï¿½ 2147483647ï¿½ï¿½
  *  @param   pow ï¿½Î·ï¿½ï¿½ï¿½ï¿½ï¿½Î§ï¿½ï¿½ 0 ï¿½ï¿½ 65535
  *  @retval  num^pow
  */
static int32_t OLED_Pow(int32_t num,uint16_t pow)
{
	uint16_t i;
	int32_t ret=1;
	if(pow==0)
		return ret;
	for(i=0;i<pow;i++)
	{
		ret *= num;
	}
	return ret;
}

/**
  *  @brief   ï¿½ï¿½Ê¾ï¿½ï¿½ï¿½Ö£ï¿½Ê®ï¿½ï¿½ï¿½Æ£ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  *  @param   X ï¿½Ô´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¼ï¿½Ð£ï¿½ï¿½ï¿½Î§0~65535
  *           Y ï¿½Ô´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¼ï¿½Ð£ï¿½ï¿½ï¿½Î§0~65535
  *  @param   Numï¿½ï¿½Òªï¿½ï¿½Ê¾ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  *  @param   IntNumï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î»ï¿½ï¿½
  *  @param   FontSize ï¿½ï¿½ï¿½ï¿½ï¿½Ð¡ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î?ï¿½ï¿½ï¿½ï¿½ï¿½Ö?
  *    @arg   H16W8ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿?16ï¿½ï¿½7ï¿½ï¿½ï¿½ï¿½ï¿½Ø£ï¿½
  *           H8W6 ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿?8ï¿½ï¿½6ï¿½ï¿½ï¿½ï¿½ï¿½Ø£ï¿½
  *  @retval  ï¿½ï¿½
  */
void OLED_DisplayNumber(uint16_t X,uint16_t Y,uint32_t Num,uint8_t IntBit,uint8_t FontSize)
{
	uint8_t i;
	uint8_t tmp;//ï¿½ï¿½ï¿½Ò?ï¿½ï¿½Ê¾ï¿½ï¿½ï¿½Öµï¿½Ã¿Ò»Î»
	for(i=0;i<IntBit;i++)
	{
		tmp=Num/OLED_Pow(10,IntBit-1-i);//È¡ï¿½ï¿½Numï¿½ï¿½Ã¿Ò»Î»
		Num=Num%OLED_Pow(10,IntBit-1-i);
		OLED_DisplayChar(X,Y+FontSize*i,tmp+'0',FontSize);
	}
}
	
/**
  *  @brief   ï¿½ï¿½Ê¾ï¿½ï¿½ï¿½Ö£ï¿½Ê®ï¿½ï¿½ï¿½Æ£ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  *  @param   X ï¿½Ô´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¼ï¿½Ð£ï¿½ï¿½ï¿½Î§0~65535
  *           Y ï¿½Ô´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¼ï¿½Ð£ï¿½ï¿½ï¿½Î§0~65535
  *  @param   Numï¿½ï¿½Òªï¿½ï¿½Ê¾ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  *  @param   IntBitï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î»ï¿½ï¿½
  *  @param   FontSize ï¿½ï¿½ï¿½ï¿½ï¿½Ð¡ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î?ï¿½ï¿½ï¿½ï¿½ï¿½Ö?
  *    @arg   H16W8ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿?16ï¿½ï¿½7ï¿½ï¿½ï¿½ï¿½ï¿½Ø£ï¿½
  *           H8W6 ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿?8ï¿½ï¿½6ï¿½ï¿½ï¿½ï¿½ï¿½Ø£ï¿½
  *  @retval  ï¿½ï¿½
  */
void OLED_DisplaySignNumber(uint16_t X,uint16_t Y,int32_t Num,uint8_t IntBit,uint8_t FontSize)
{
	uint8_t i;
	uint8_t tmp;//ï¿½ï¿½ï¿½Ò?ï¿½ï¿½Ê¾ï¿½ï¿½ï¿½Öµï¿½Ã¿Ò»Î»
	if(Num>=0)
	{
		OLED_DisplayChar(X,Y,'+',FontSize);
	}
	if(Num<0)
	{
		OLED_DisplayChar(X,Y,'-',FontSize);
		Num=-Num;
	}
	for(i=0;i<IntBit;i++)
	{
		tmp=Num/OLED_Pow(10,IntBit-1-i);//È¡ï¿½ï¿½Numï¿½ï¿½Ã¿Ò»Î»
		
		Num=Num%OLED_Pow(10,IntBit-1-i);
		OLED_DisplayChar(X,Y+FontSize*(i+1),tmp+'0',FontSize);
	}
}

/**
  *  @brief   ï¿½ï¿½Ê¾ï¿½ï¿½ï¿½Ö£ï¿½Ê®ï¿½ï¿½ï¿½ï¿½ï¿½Æ£ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  *  @param   X ï¿½Ô´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¼ï¿½Ð£ï¿½ï¿½ï¿½Î§0~65535
  *           Y ï¿½Ô´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¼ï¿½Ð£ï¿½ï¿½ï¿½Î§0~65535
  *  @param   Numï¿½ï¿½Òªï¿½ï¿½Ê¾ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  *  @param   IntBitï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î»ï¿½ï¿½
  *  @param   FontSize ï¿½ï¿½ï¿½ï¿½ï¿½Ð¡ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î?ï¿½ï¿½ï¿½ï¿½ï¿½Ö?
  *    @arg   H16W8ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿?16ï¿½ï¿½7ï¿½ï¿½ï¿½ï¿½ï¿½Ø£ï¿½
  *           H8W6 ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿?8ï¿½ï¿½6ï¿½ï¿½ï¿½ï¿½ï¿½Ø£ï¿½
  *  @retval  ï¿½ï¿½
  */
void OLED_DisplayHexNum(uint16_t X,uint16_t Y,int32_t Num,uint8_t IntBit,uint8_t FontSize)
{
	uint8_t i;
	uint8_t tmp;//ï¿½ï¿½ï¿½Ò?ï¿½ï¿½Ê¾ï¿½ï¿½ï¿½Öµï¿½Ã¿Ò»Î»
	OLED_DisplayChar(X,Y,'0',FontSize);
	OLED_DisplayChar(X,Y+FontSize*1,'X',FontSize);
	for(i=0;i<IntBit;i++)
	{
		tmp=(Num/OLED_Pow(16,IntBit-1-i))%16;//È¡ï¿½ï¿½Numï¿½ï¿½Ã¿Ò»Î»
		if(tmp<10)
		{
			OLED_DisplayChar(X,Y+FontSize*(i+2),tmp+'0',FontSize);
		}
		else
		{
			OLED_DisplayChar(X,Y+FontSize*(i+2),tmp-10+'A',FontSize);
		}
	}
}

/**
  *  @brief   ï¿½ï¿½Ê¾ï¿½ï¿½ï¿½Ö£ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Æ£ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  *  @param   X ï¿½Ô´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¼ï¿½Ð£ï¿½ï¿½ï¿½Î§0~65535
  *           Y ï¿½Ô´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¼ï¿½Ð£ï¿½ï¿½ï¿½Î§0~65535
  *  @param   Numï¿½ï¿½Òªï¿½ï¿½Ê¾ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  *  @param   IntBitï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î»ï¿½ï¿½
  *  @param   FontSize ï¿½ï¿½ï¿½ï¿½ï¿½Ð¡ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î?ï¿½ï¿½ï¿½ï¿½ï¿½Ö?
  *    @arg   H16W8ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿?16ï¿½ï¿½7ï¿½ï¿½ï¿½ï¿½ï¿½Ø£ï¿½
  *           H8W6 ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿?8ï¿½ï¿½6ï¿½ï¿½ï¿½ï¿½ï¿½Ø£ï¿½
  *  @retval  ï¿½ï¿½
  */
void OLED_DisplayBinNum(uint16_t X,uint16_t Y,int32_t Num,uint8_t IntBit,uint8_t FontSize)
{
	uint8_t i;
	uint8_t tmp;//ï¿½ï¿½ï¿½Ò?ï¿½ï¿½Ê¾ï¿½ï¿½ï¿½Öµï¿½Ã¿Ò»Î»
	OLED_DisplayChar(X,Y,'0',FontSize);
	OLED_DisplayChar(X,Y+FontSize*1,'X',FontSize);
	for(i=0;i<IntBit;i++)
	{
		tmp=(Num/OLED_Pow(2,IntBit-1-i))%2;//È¡ï¿½ï¿½Numï¿½ï¿½Ã¿Ò»Î»
    OLED_DisplayChar(X,Y+FontSize*i,tmp+'0',FontSize);
	}
	OLED_DisplayChar(X,Y+FontSize*i,'B',FontSize);
}


/**
  *  @brief   ï¿½ï¿½Ê¾ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  *  @param   X ï¿½Ô´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¼ï¿½Ð£ï¿½ï¿½ï¿½Î§0~65535
  *           Y ï¿½Ô´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¼ï¿½Ð£ï¿½ï¿½ï¿½Î§0~65535
  *  @param   Numï¿½ï¿½Òªï¿½ï¿½Ê¾ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  *  @param   IntNumï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î»ï¿½ï¿½
  *  @param   DecNumï¿½ï¿½Ð¡ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î»ï¿½ï¿½
  *  @param   FontSize ï¿½ï¿½ï¿½ï¿½ï¿½Ð¡ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î?ï¿½ï¿½ï¿½ï¿½ï¿½Ö?
  *    @arg   H16W8ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿?16ï¿½ï¿½7ï¿½ï¿½ï¿½ï¿½ï¿½Ø£ï¿½
  *           H8W6 ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿?8ï¿½ï¿½6ï¿½ï¿½ï¿½ï¿½ï¿½Ø£ï¿½
  *  @retval  ï¿½ï¿½
  */
void OLED_DisplayFloat(uint16_t X,uint16_t Y,double Num,uint8_t IntBit,uint8_t DecBit,uint8_t FontSize)
{
	int32_t Int;
	double Flt;
	uint8_t Pow;
	if(Num>=0)
	{
		OLED_DisplayChar(X,Y,'+',FontSize);
	}
	if(Num<0)
	{
		OLED_DisplayChar(X,Y,'-',FontSize);
		Num=-Num;
	}
	Int=Num;//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿?
	Num -= Int;//ï¿½ï¿½Ö¹ï¿½ï¿½ï¿½ï¿½Ä³Ë·ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿?
	Pow=OLED_Pow(10,DecBit);
	Flt=Num*Pow;
	Flt=round(Flt);//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
//	Int += Flt / Pow;				//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ë½ï¿½Î»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ò?ï¿½Ù¼Ó¸ï¿½ï¿½ï¿½ï¿½ï¿½(ï¿½ï¿½ï¿½Æ´ï¿½Ä´ï¿½ï¿½ë£?ï¿½ï¿½Öªï¿½ï¿½ï¿½ï¿½Ê²Ã´ï¿½ï¿½)
	OLED_DisplayNumber(X,Y+FontSize,Int,IntBit,FontSize);
	OLED_DisplayChar(X,Y+FontSize*(IntBit+1),'.',FontSize);
	OLED_DisplayNumber(X,Y+FontSize*(IntBit+2),Flt,DecBit,FontSize);
}


/**
  *  @brief   ï¿½ï¿½Ê¾ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  *  @param   X ï¿½Ô´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¼ï¿½Ð£ï¿½ï¿½ï¿½Î§0~65535
  *           Y ï¿½Ô´ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê¼ï¿½Ð£ï¿½ï¿½ï¿½Î§0~65535
  *  @param   Numï¿½ï¿½Òªï¿½ï¿½Ê¾ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  *  @param   IntNumï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î»ï¿½ï¿½
  *  @param   DecNumï¿½ï¿½Ð¡ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î»ï¿½ï¿½
  *  @param   FontSize ï¿½ï¿½ï¿½ï¿½ï¿½Ð¡ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Î?ï¿½ï¿½ï¿½ï¿½ï¿½Ö?
  *    @arg   H16W8ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿?16ï¿½ï¿½7ï¿½ï¿½ï¿½ï¿½ï¿½Ø£ï¿½
  *           H8W6 ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿?8ï¿½ï¿½6ï¿½ï¿½ï¿½ï¿½ï¿½Ø£ï¿½
  *  @retval  ï¿½ï¿½
  */
void OLED_DisplayChinese(uint16_t X, uint16_t Y, char* Buff)
{
	uint8_t pindex = 0;
	uint8_t i = 0;
	while (strcmp(OLED_CF16x16[pindex], "") == 0)
	{

	}
}





